<!DOCTYPE html>
<html lang="en">

<head>
  <title>Title Goes Here</title>
  <link rel="stylesheet" href="/stylesheets/style.css">
</head>

<body>
  <h1>Predicted Test Performance on Population Segments</h1>
  <form>
    <label for="variable">Select variable:</label>
    <select name="variable" id="variable" onchange="selectAction()">
      <option value="none" selected>-- no variable selected --</option>
    </select>
    <label for="antigenTest">Select test:</label>
    <select name="antigenTest" id="antigenTest" onchange="selectAction()">
      <option value="none" selected>-- no test selected --</option>
    </select>
  </form>
  <div id="displaybox"></div>
  <hr/>
  <h3>Specification Questions:</h3>
  <ul>
    <li>Should we set the same scale on both (all) y-axes?</li>
  </ul>
</body>
<script type="module">
  import { doQuery, loadVariableOptions, loadAssayOptions } from './javascripts/histo.js';

  function selectAction() {
    let variable = document.getElementById("variable").value;
    let assay = document.getElementById("antigenTest").value;
    doQuery(variable, assay);
  }

  document.getElementById("variable").onchange = selectAction;
  document.getElementById("antigenTest").onchange = selectAction;

  let url;
  
  url = "/api/variables";
  fetch(url)
        .then(response => response.json())
        .then(data => loadVariableOptions(data));

  url = "/api/assays";
  fetch(url)
        .then(response => response.json())
        .then(data => loadAssayOptions(data));

</script>
</html>
