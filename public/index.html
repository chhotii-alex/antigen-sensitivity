<!DOCTYPE html>
<html lang="en">

<head>
  <title>Predicted COVID Test Performance</title>
  <link rel="stylesheet" href="/stylesheets/style.css">
</head>

<body>
  <a href="dataset" download> Download De-identified Dataset </a>
  <h1>Predicted Test Performance on Population Segments</h1>
  <form>
    <div class="selects_form">
      <fieldset class="select_var">
        <legend class="select_label select_label_var" >Select variable:</legend>
        <select class="select_var" name="variable" id="variable" onchange="selectAction()">
          <option value="none" selected>-- no variable selected --</option>
        </select>
        <div id="checkboxes"></div>
      </fieldset>
      <fieldset class="select_antigen">
        <legend class="select_label select_label_antigen" >Select test:</legend>
        <select class="select_antigen" name="antigenTest" id="antigenTest" onchange="selectAction()">
          <option value="none" selected>-- no test selected --</option>
        </select>
      </fieldset>
    </div>
    <!-- 
    <label for="minDate">From date:</label>
    <input type="date" id="minDate" name="minDate" />
    <label for="maxDate">to date:</label>
    <input type="date" id="maxDate" name="maxDate" /> -->
  </form>
  <div id="displaybox"></div>
  <details id="moresettings">
    <summary>Show More Settings</summary>
    <div class="indent">
      Scaling on y axes:
      <input type="radio" id="scale_absolute" name="y_scale" value="scale_absolute" checked="checked">
      <label for="scale_absolute">Counts&mdash;Independent</label>
      <input type="radio" id="scale_shared" name="y_scale" value="scale_shared">
      <label for="scale_shared">Counts&mdash;Shared</label>
    </div>
    <div class="indent">
      <label for="infectivityThreshold" name="infectivityThreshold">Infectivity Threshold:</label>
      <input type="range" min="0" max="13" value="5" class="slider" id="infectivityThreshold">
    </div>
  </details>
  <hr/>
</body>
<script type="module">
  import { setInfectivityThreshold, presentData } from './javascripts/histo.js';

  function updateThreshold(event) {
    let newValue = event.target.value;
    setInfectivityThreshold(newValue);
  }
  document.getElementById("infectivityThreshold").oninput = updateThreshold;
  setInfectivityThreshold(document.getElementById("infectivityThreshold").value);

  function updateScaleOption(event) {
      presentData();
  }
  document.getElementById("scale_absolute").onchange = updateScaleOption;
  document.getElementById("scale_shared").onchange = updateScaleOption;

</script>
</html>
